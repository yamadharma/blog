---
title: "Лабораторная работа Установка ОС Linux"
author: ["Dmitry S. Kulyabov"]
date: 2022-04-04T13:40:00+03:00
lastmod: 2023-07-29T19:59:00+03:00
tags: ["education"]
categories: ["computer-science"]
draft: false
weight: 201
toc: true
type: "book"
feedback: false
slug: "lab-linux-install"
summary: "Установка ОС Linux"
linktitle: "Установка ОС Linux"
menu:
  "lab-linux-install":
    identifier: "лабораторная-работа-установка-ос-linux"
    parent: "os-intro-lab"
    weight: 201
---

Лабораторная работа _Установка ОС Linux_.

<!--more-->


## <span class="section-num">1</span> Цель работы {#цель-работы}

-   Целью данной работы является приобретение практических навыков установки операционной системы на виртуальную машину, настройки минимально необходимых для дальнейшей работы сервисов.


## <span class="section-num">2</span> Указания к работе {#указания-к-работе}


### <span class="section-num">2.1</span> Техническое обеспечение {#техническое-обеспечение}

-   Лабораторная работа подразумевает установку на виртуальную машину VirtualBox (<https://www.virtualbox.org/>) операционной системы Linux (дистрибутив Fedora).
-   Выполнение работы возможно как в дисплейном классе факультета физико-математических и естественных наук РУДН, так и дома. Описание выполнения работы приведено для дисплейного класса со следующими характеристиками техники:
    -   Intel Core i3-550 3.2 GHz, 4 GB оперативной памяти, 80 GB свободного места на жёстком диске;
    -   ОС Linux Gentoo (<http://www.gentoo.ru/>);
    -   VirtualBox версии 7.0 или новее.
-   Для установки в виртуальную машину используется дистрибутив Linux Fedora (<https://getfedora.org>), вариант с менеджером окон _i3_ (<https://spins.fedoraproject.org/i3/>).
-   При выполнении лабораторной работы на своей технике вам необходимо скачать необходимый образ операционной системы (<https://spins.fedoraproject.org/i3/download/index.html>).


### <span class="section-num">2.2</span> Соглашения об именовании {#соглашения-об-именовании}

-   При выполнении работ следует придерживаться следующих правил именования:
    -   Пользователь внутри виртуальной машины должен иметь имя, совпадающее с учётной записью студента, выполняющего лабораторную работу.
    -   Имя хоста вашей виртуальной машины должно совпадать с учётной записью студента, выполняющего лабораторную работу.
    -   Имя виртуальной машины должно совпадать с учётной записью студента, выполняющего лабораторную работу.
    -   В дисплейных классах вы можете посмотреть имя вашей учётной записи, набрав в терминале команду:
        ```shell
        id -un
        ```
-   При установке на своей технике необходимо использовать имя вашей учётной записи дисплейных классов. Например, если студента зовут Остап Сулейманович Бендер, то его учётная запись имеет вид `osbender`.


## <span class="section-num">3</span> Последовательность выполнения работы {#последовательность-выполнения-работы}


### <span class="section-num">3.1</span> Выполнение в дисплейном классе {#выполнение-в-дисплейном-классе}

-   Загрузите в дисплейном классе операционную систему Linux. Осуществите вход в систему.


#### <span class="section-num">3.1.1</span> Настройка каталога для виртуальных машин {#настройка-каталога-для-виртуальных-машин}

<!--list-separator-->

1.  Создание необходимых каталогов

    -   Запустите терминал. Перейдите в каталог `/var/tmp`:
        ```shell
        cd /var/tmp
        ```
    -   Создайте каталог с именем пользователя (совпадающий с логином студента в дисплейном классе). Для этого можно использовать команду:
        ```shell
        mkdir /var/tmp/`id -un`
        ```
    -   Проверьте в свойствах VirtualBox **месторасположение каталога для виртуальных машин**:
        ```shell
        /var/tmp/имя_пользователя
        ```

        -   Здесь `имя_пользователя` --- логин (учётная запись) студента в дисплейном классе. Если указан другой каталог, то требуется изменить его.

<!--list-separator-->

2.  Папка виртуальных машин

    <!--list-separator-->

    1.  Значения по умолчанию

        -   Linux: `$HOME/VirtualBox VMs`.

    <!--list-separator-->

    2.  Графический интерфейс

        -   В меню выберите _Файл_, _Настройки_.
        -   Выберите _Общие_, поле _Папка для машин по умолчанию_.
        -   Установите новое значение, например `/var/tmp/имя_пользователя`.
        -   Нажмите ОК, чтобы сохранить изменения.

    <!--list-separator-->

    3.  Командная строка

        -   Установим папку для виртуальных машине в `/var/tmp/имя_пользователя`:
            ```shell
            VBoxManage setproperty machinefolder /var/tmp/имя_пользователя
            ```


#### <span class="section-num">3.1.2</span> Настройка хост-клавиши {#настройка-хост-клавиши}

-   Хост-клавишей по умолчанию является правый `Ctrl`.
-   По умолчанию в дисплейных классах на клавише правый `Ctrl` находится переключатель языка ввода.
-   Эти значения могут конфликтовать.

<!--list-separator-->

1.  Графический интерфейс

    -   В меню выберите _Файл_, _Настройки_.
    -   Выберите _Ввод_, вкладка _Виртуальная машина_.
    -   Выберите _Сочетание клавиш_ в строке _Хост-комбинация_.
    -   Нажмите новое сочетание клавиш.
    -   Нажмите ОК, чтобы сохранить изменения.

<!--list-separator-->

2.  Командная строка

    -   Проверьте текущую комбинацию для хост-клавиши:
        ```shell
        VBoxManage getextradata global GUI/Input/HostKeyCombination
        ```

        -   По умолчанию установлена комбинация `65508`, соответствующая правой клавише `Ctrl`.
    -   Установите нужную клавишу (в примере клавиша _Menu_):
        ```shell
        VBoxManage setextradata global GUI/Input/HostKeyCombination 65383
        ```
    -   Комбинации клавиш можно, например, посмотреть на странице <https://pythonhosted.org/pyglet/api/pyglet.window.key-module.html>.


### <span class="section-num">3.2</span> Создание виртуальной машины {#создание-виртуальной-машины}

-   Запустите менеджер виртуальных машин, введя в командной строке:
    ```shell
    VirtualBox &
    ```
-   Создайте новую виртуальную машину.
-   Укажите имя виртуальной машины (ваш логин в дисплейном классе), тип операционной системы --- Linux, Fedora.
-   Укажите размер основной памяти виртуальной машины --- от 2048 МБ.
-   Задайте конфигурацию жёсткого диска --- загрузочный, VDI (VirtualBox Disk Image), динамический виртуальный диск.
-   Задайте размер диска --- 80 ГБ (или больше), его расположение --- в данном случае `/var/tmp/имя_пользователя/fedora.vdi`.
-   Выберите в VirtualBox Вашей виртуальной машины. Добавьте новый привод оптических дисков и выберите образ.
-   При установке на собственной технике используйте скачанный образ операционной системы Fedora.


#### <span class="section-num">3.2.1</span> Видео: Создание виртуальной машины {#видео-создание-виртуальной-машины}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube f4e38867368ced9e13556341023c2c03 >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube 9_Vt7R57Yw4 >}}

{{< /rtab >}}
{{< /tabs >}}


### <span class="section-num">3.3</span> Установка операционной системы {#установка-операционной-системы}


#### <span class="section-num">3.3.1</span> Запуск приложения для установки системы {#запуск-приложения-для-установки-системы}

-   Загрузите LiveCD.
-   Появится интерфейс начальной конфигурации.
-   Нажмите _Enter_ для создания конфигурации по умолчанию.
-   Нажмите _Enter_, чтобы выбрать в качестве модификатора клавишу _Win_ (она же клавиша _Super_).
-   В файле конфигурации эта клавиша будет обозначена как `$Mod`.
-   Нажмите комбинацию _Win+Enter_ для запуска терминала.
-   В терминале запустите `liveinst`.
-   Для перехода к раскладке окон с табами нажмите _Win+w_.


#### <span class="section-num">3.3.2</span> Установка системы на диск {#установка-системы-на-диск}

-   Выберите язык интерфейса и перейдите к настройкам установки операционной системы.
-   При необходимости скорректируйте часовой пояс, раскладку клавиатуры (рекомендуется в качестве языка по умолчанию указать английский язык).
-   Место установки ОС оставьте без изменения.
-   Установите имя и пароль для пользователя `root`.
-   Установите имя и пароль для Вашего пользователя.
-   Задайте сетевое имя Вашего компьютера.
-   После завершения установки операционной системы корректно перезапустите виртуальную машину.
-   В VirtualBox оптический диск должен отключиться автоматически, но если это не произошло, то необходимо отключить носитель информации с образом.


#### <span class="section-num">3.3.3</span> Видео: Установка операционной системы {#видео-установка-операционной-системы}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube 603fc8f3cf968d3c4151073aa7a4789f >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube XYYbl5ABN9Q >}}

{{< /rtab >}}
{{< /tabs >}}


### <span class="section-num">3.4</span> После установки {#после-установки}

-   Войдите в ОС под заданной вами при установке учётной записью.
-   Нажмите комбинацию _Win+Enter_ для запуска терминала.
-   Переключитесь на роль супер-пользователя:
    ```shell
    sudo -i
    ```


#### <span class="section-num">3.4.1</span> Обновления {#обновления}

-   Обновить все пакеты
    ```shell
    dnf -y update
    ```


#### <span class="section-num">3.4.2</span> Повышение комфорта работы {#повышение-комфорта-работы}

-   Программы для удобства работы в консоли:
    ```shell
    dnf install tmux mc
    ```


#### <span class="section-num">3.4.3</span> Автоматическое обновление {#автоматическое-обновление}

-   При необходимости можно использовать автоматическое обновление (см. [Автообновление систем на базе деривативов RedHat]({{< relref "2022-09-25-redhat-based-systems-auto-update" >}})).
-   Установка программного обеспечения:
    ```shell
    dnf install dnf-automatic
    ```
-   Задаёте необходимую конфигурацию в файле `/etc/dnf/automatic.conf`.
-   Запустите таймер:
    ```shell
    systemctl enable --now dnf-automatic.timer
    ```


#### <span class="section-num">3.4.4</span> Отключение SELinux {#отключение-selinux}

-   В данном курсе мы не будем рассматривать работу с системой безопасности SELinux.
-   Поэтому отключим его.
-   В файле `/etc/selinux/config` замените значение
    ```conf-unix
    SELINUX=enforcing
    ```
    на значение
    ```conf-unix
    SELINUX=permissive
    ```
-   Перегрузите виртуальную машину:
    ```shell
    reboot
    ```


### <span class="section-num">3.5</span> Установка драйверов для VirtualBox {#установка-драйверов-для-virtualbox}

-   Войдите в ОС под заданной вами при установке учётной записью.
-   Нажмите комбинацию _Win+Enter_ для запуска терминала.
-   Запустите терминальный мультиплексор _tmux_:
    ```shell
    tmux
    ```
-   Переключитесь на роль супер-пользователя:
    ```shell
    sudo -i
    ```
-   Установите пакет _DKMS_:
    ```shell
    dnf -y install dkms
    ```
-   В меню виртуальной машины подключите образ диска дополнений гостевой ОС.
-   Подмонтируйте диск:
    ```shell
    mount /dev/sr0 /media
    ```
-   Установите драйвера:
    ```shell
    /media/VBoxLinuxAdditions.run
    ```
-   Перегрузите виртуальную машину:
    ```shell
    reboot
    ```


### <span class="section-num">3.6</span> Настройка раскладки клавиатуры {#настройка-раскладки-клавиатуры}

-   Войдите в ОС под заданной вами при установке учётной записью.
-   Нажмите комбинацию _Win+Enter_ для запуска терминала.
-   Запустите терминальный мультиплексор _tmux_:
    ```shell
    tmux
    ```
-   Переключитесь на роль супер-пользователя:
    ```shell
    sudo -i
    ```
-   Отредактируйте конфигурационный файл `/etc/X11/xorg.conf.d/00-keyboard.conf`:
    ```conf-unix
    Section "InputClass"
            Identifier "system-keyboard"
            MatchIsKeyboard "on"
            Option "XkbLayout" "us,ru"
            Option "XkbVariant" ",winkeys"
            Option "XkbOptions" "grp:rctrl_toggle,compose:ralt,terminate:ctrl_alt_bksp"
    EndSection
    ```
-   Для этого можно использовать файловый менеджер `mc` и его встроенный редактор.
-   Перегрузите виртуальную машину:
    ```shell
    reboot
    ```


#### <span class="section-num">3.6.1</span> Видео: Настройка раскладки клавиатуры {#видео-настройка-раскладки-клавиатуры}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube f1004d77e929bfb0f856f8aa471aa67c >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube ayLha0dDiQw >}}

{{< /rtab >}}
{{< /tabs >}}


### <span class="section-num">3.7</span> Установка имени пользователя и названия хоста {#установка-имени-пользователя-и-названия-хоста}

-   Если при установке виртуальной машины вы задали имя пользователя или имя хоста, не удовлетворяющее соглашению об именовании, то вам необходимо исправить это.
-   Запустите виртуальную машину и залогиньтесь.
-   Нажмите комбинацию _Win+Enter_ для запуска терминала.
-   Запустите терминальный мультиплексор _tmux_:
    ```shell
    tmux
    ```
-   Переключитесь на роль супер-пользователя:
    ```shell
    sudo -i
    ```
-   Создайте пользователя (вместо `username` укажите ваш логин в дисплейном классе):
    ```shell
    adduser -G wheel username
    ```
-   Задайте пароль для пользователя (вместо `username` укажите ваш логин в дисплейном классе):
    ```shell
    passwd username
    ```
-   Установите имя хоста (вместо `username` укажите ваш логин в дисплейном классе):
    ```shell
    hostnamectl set-hostname username
    ```
-   Проверьте, что имя хоста установлено верно:
    ```shell
    hostnamectl
    ```


#### <span class="section-num">3.7.1</span> Видео: Имя пользователя и хоста {#видео-имя-пользователя-и-хоста}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube a1a2bac5dbd805b11d5d5390cdfcee50 >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube zU1x8rx4JjA >}}

{{< /rtab >}}
{{< /tabs >}}


### <span class="section-num">3.8</span> Установка программного обеспечения для создания документации {#установка-программного-обеспечения-для-создания-документации}

-   Нажмите комбинацию _Win+Enter_ для запуска терминала.
-   Запустите терминальный мультиплексор _tmux_:
    ```shell
    tmux
    ```
-   Переключитесь на роль супер-пользователя:
    ```shell
    sudo -i
    ```


#### <span class="section-num">3.8.1</span> pandoc {#pandoc}

-   Установим `pandoc`:
    ```shell
    dnf -y install pandoc
    ```
-   Установите необходимые расширения:
    ```shell
    pip install pandoc-fignos pandoc-eqnos pandoc-tablenos pandoc-secnos --user
    ```


#### <span class="section-num">3.8.2</span> texlive {#texlive}

-   Установим дистрибутив TeXlive (см. [Установка TeX Live]({{< relref "2021-04-23-install-texlive" >}})):
    ```shell
    dnf -y install texlive texlive-\*
    ```


#### <span class="section-num">3.8.3</span> Видео: Установка TeX {#видео-установка-tex}

{{< tabs tabTotal="2" >}}
{{< rtab tabName="RuTube" >}}

{{< rutube a60d71c8e5644c1fa42b445670fb43c8 >}}

{{< /rtab >}}
{{< rtab tabName="Youtube" >}}

{{< youtube 65yj0KvKZGM >}}

{{< /rtab >}}
{{< /tabs >}}


## <span class="section-num">4</span> Домашнее задание {#домашнее-задание}

-   Дождитесь загрузки графического окружения и откройте терминал. В окне терминала проанализируйте последовательность загрузки системы, выполнив команду `dmesg`. Можно просто просмотреть вывод этой команды:
    ```shell
    dmesg | less
    ```
-   Можно использовать поиск с помощью `grep`:
    ```shell
    dmesg | grep -i "то, что ищем"
    ```
-   Получите следующую информацию.
    -   Версия ядра Linux (Linux version).
    -   Частота процессора (Detected Mhz processor).
    -   Модель процессора (CPU0).
    -   Объём доступной оперативной памяти (Memory available).
    -   Тип обнаруженного гипервизора (Hypervisor detected).
    -   Тип файловой системы корневого раздела.
    -   Последовательность монтирования файловых систем.


## <span class="section-num">5</span> Содержание отчёта {#содержание-отчёта}

-   Отчёт должен включать:
    -   титульный лист;
    -   формулировку задания работы;
    -   описание результатов выполнения задания:
        -   краткое описание действия;
        -   вводимую команду или команды;
        -   результаты выполнения команд (снимок экрана);
    -   выводы, согласованные с заданием работы;
    -   ответы на контрольные вопросы;
    -   отчёт о выполнении дополнительного задания.


## <span class="section-num">6</span> Контрольные вопросы {#контрольные-вопросы}

1.  Какую информацию содержит учётная запись пользователя?

2.  Укажите команды терминала и приведите примеры:
    -   для получения справки по команде;
    -   для перемещения по файловой системе;
    -   для просмотра содержимого каталога;
    -   для определения объёма каталога;
    -   для создания / удаления каталогов / файлов;
    -   для задания определённых прав на файл / каталог;
    -   для просмотра истории команд.

3.  Что такое файловая система? Приведите примеры с краткой характеристикой.
4.  Как посмотреть, какие файловые системы подмонтированы в ОС?
5.  Как удалить зависший процесс?

При ответах на контрольные вопросы рекомендуется ознакомиться с информацией из  [<a href="#citeproc_bib_item_1">1</a>–<a href="#citeproc_bib_item_3">3</a>; <a href="#citeproc_bib_item_3">3</a>–<a href="#citeproc_bib_item_7">7</a>].

## Литература

<div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>1.	Robbins A. Bash pocket reference / A.  Robbins. – O’Reilly Media, 2016. – 156 pp.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_2"></a>2.	Colvin H. Virtualbox: An ultimate guide book on virtualization with virtualbox / H.  Colvin. – CreateSpace Independent Publishing Platform, 2015. – 70 pp.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_3"></a>3.	Dash P. Getting started with oracle vm virtualbox / P.  Dash. – Packt Publishing Ltd, 2013. – 86 pp.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_4"></a>4.	Vugt S. van. Red hat rhcsa/rhce 7 cert guide : Red hat enterprise linux 7 (ex200 and ex300) : Certification guide / S.  van Vugt. – Pearson IT Certification, 2016. – 1008 pp.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_5"></a>5.	Колисниченко Д. Н. Самоучитель системного администратора Linux : Системный администратор / Д. Н.  Колисниченко. – СПб. : БХВ-Петербург, 2011. – 544 pp.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_6"></a>6.	Немет Э. Unix и Linux: руководство системного администратора / Э.  Немет, Г.  Снайдер, Т. Р.  Хейн, Б.  Уэйли. – 4-е изд. – Вильямс, 2014. – 1312 pp.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_7"></a>7.	Робачевский А. Операционная система unix / А.  Робачевский, С.  Немнюгин, О.  Стесик. – 2-е изд. – Санкт-Петербург : БХВ-Петербург, 2010. – 656 pp.</div>
</div>
