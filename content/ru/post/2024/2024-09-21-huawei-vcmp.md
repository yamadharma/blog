---
title: "Huawei. Протокол VCMP"
author: ["Dmitry S. Kulyabov"]
date: 2024-09-21T12:49:00+03:00
lastmod: 2024-09-21T13:20:00+03:00
tags: ["hard", "network", "sysadmin"]
categories: ["computer-science"]
draft: false
slug: "huawei-vcmp"
---

Huawei. Протокол VCMP.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Протокол управления VLAN.
-   Используется для реализации централизованного управления и обслуживания VLAN.
-   VCMP есть собственный протокол Huawei, который работает на канальном уровне для передачи информации VLAN и обеспечивает согласованность информации VLAN в сети уровня 2.
-   Аналогичен протоколу Cisco VTP.


## <span class="section-num">2</span> Домен VCMP {#домен-vcmp}

-   Домен VCMP состоит из коммутаторов, имеющих одинаковое доменное имя VCMP и подключённых через транковые или гибридные интерфейсы.
-   Все коммутаторы в домене VCMP должны использовать одно и то же имя домена, и каждый коммутатор может присоединиться только к одному домену VCMP.
-   Коммутаторы в разных доменах VCMP не могут синхронизировать информацию VLAN.
-   Домен VCMP определяет область действия административного коммутатора и управляемых коммутаторов.
-   Коммутаторы в домене VCMP управляются административным коммутатором.
-   В домене VCMP имеется только один административный коммутатор и несколько управляемых коммутаторов.
-   Прозрачные и тихие коммутаторы VCMP не принадлежат ни одному домену VCMP.


## <span class="section-num">3</span> Роли VCMP {#роли-vcmp}

-   Сервер (Server).
    -   Сервер VCMP синхронизирует информацию VLAN с другими коммутаторами в локальном домене VCMP.
    -   Если сети VLAN создаются или удаляются, а также имена или описания VLAN изменяются на сервере VCMP, конфигурации синхронизируются с другими коммутаторами в домене VCMP.
-   Клиент (Client).
    -   Клиент VCMP принадлежит указанному домену VCMP и синхронизирует информацию VLAN с сервером VCMP.
    -   Если сети VLAN создаются или удаляются либо имена или описания VLAN изменяются на клиенте VCMP, конфигурации не синхронизируются с другими коммутаторами в домене VCMP.
    -   Информация VLAN на клиенте VCMP перезаписывается информацией, отправленной сервером VCMP.
-   Прозрачный (Transparent).
    -   Прозрачный коммутатор VCMP не влияет на другие коммутаторы в локальном домене VCMP и не зависит от поведения управления VCMP.
    -   Прозрачный коммутатор VCMP прозрачно пересылает пакеты VCMP только по транковым или гибридным каналам.
    -   Если VLAN создаются или удаляются, а также имена или описания VLAN изменяются на прозрачном коммутаторе VCMP, информация VLAN на прозрачном коммутаторе VCMP не влияет на информацию на сервере VCMP и не синхронизируется с другими коммутаторами в домене VCMP.
-   Тихий (Silent).
    -   Тихий коммутатор VCMP не влияет на другие коммутаторы в локальном домене VCMP и не зависит от поведения управления VCMP.
    -   Предотвращает передачу пакетов VCMP из домена VCMP в другие домены VCMP.
    -   Отбрасывает полученные пакеты VCMP.
    -   Если VLAN создаются или удаляются, а также имена или описания VLAN изменяются на тихом коммутаторе VCMP, информация VLAN на тихом коммутаторе VCMP не влияет на информацию на сервере VCMP и не синхронизируется с другими коммутаторами в домене VCMP.


## <span class="section-num">4</span> Конфигурация {#конфигурация}


### <span class="section-num">4.1</span> Настройка {#настройка}

-   Аутентификация в домене:
    ```shell
    vcmp authentication sha2-256 password <пароль>
    ```
-   Установка идентификатора сервера:
    ```shell
    vcmp device-id <идентификатор>
    ```
-   Домен VCMP:
    ```shell
    vcmp domain <домен>
    ```
-   Установка роли коммутатора:
    ```shell
    vcmp role <роль>
    ```

    -   Роли могут быть следующими:
        -   `client`
        -   `server`
        -   `silent`
        -   `transparent`


### <span class="section-num">4.2</span> Управление {#управление}

-   Сброс настроек на клиенте:
    ```shell
    reset vcmp
    ```


### <span class="section-num">4.3</span> Информация {#информация}

-   Статус vcmp:
    ```shell
    display vcmp status
    ```
-   Изменения VLAN:
    ```shell
    display vcmp track
    ```
