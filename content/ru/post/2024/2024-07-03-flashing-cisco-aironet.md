---
title: "Перепрошивка точки доступа Cisco Aironet"
author: ["Dmitry S. Kulyabov"]
date: 2024-07-03T12:00:00+03:00
lastmod: 2024-07-03T12:55:00+03:00
tags: ["sysadmin", "cisco", "network"]
categories: ["computer-science"]
draft: false
slug: "flashing-cisco-aironet"
---

Перепрошивка точки доступа Cisco Aironet.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Точки доступа Cisco могут работать в двух режимах:
    -   Autonomous AP IOS Software;
        -   автономная точка доступа;
        -   управляется самостоятельно по http/https или telnet/ssh.
    -   Lightweight AP IOS Software:
        -   точка доступа управляется с WLC с контроллера беспроводной сети Cisco (см. [Контроллер Cisco WLC]({{< relref "2023-03-03-cisco-wlc" >}})).


### <span class="section-num">1.1</span> Версии образа системы {#версии-образа-системы}

-   Выясните версию IOS:
    ```shell
    show version
    ```
-   В имени файла закодированы параметры образа:
    ```text
    <модель_точки>-<функции>-tar.<версия>.tar
    ```
-   В поле функция указан вариант образа:
    -   легковесная точка доступа:
        -   `k9w8`;
    -   автономная точка доступа:
        -   `k9w7`;
    -   облегченный образ для восстановления:
        -   `rcvk9w8`.


### <span class="section-num">1.2</span> Отличия прошивок {#отличия-прошивок}

-   У легковесной прошивки:
    -   нет режима `configure terminal`;
    -   нет команды `archive` для обновления прошивки.


## <span class="section-num">2</span> Подготовка к обновлению программного обеспечения {#подготовка-к-обновлению-программного-обеспечения}


### <span class="section-num">2.1</span> Сброс настроек {#сброс-настроек}

-   Зажимаем на точке доступа кнопку `Mode`, включаем питание.
-   Удерживаем кнопку нажатой ~ 30с, пока светодиод на точке не загорится красным.
-   Отпускаем кнопку, светодиод мигает зелёным.
-   Учётные данные по умолчанию:
    -   логин: `cisco`;
    -   пароль: `Cisco`;
    -   enable: `Cisco`.


## <span class="section-num">3</span> Перевод из облегчённого режима в автономный {#перевод-из-облегчённого-режима-в-автономный}

-   Подключиться к точке доступа по консольному кабелю.
-   Войдите в режим конфигурации:
    ```shell
    debug capwap console cli
    ```
-   Обновим прошивку:
    ```shell
    archive tar /xtract tftp://10.10.1.4/ap1g1-k9w7-tar.153-3.JK.tar flash:
    ```
-   Удалим старую прошивку:
    ```shell
    del /force /recursive flash:/ap1g1-k9w8-mx.153-3.JK
    ```
-   Перезагружаем точку доступа:
    ```shell
    reload
    ```


## <span class="section-num">4</span> Перевод из автономного режима в облегчённый {#перевод-из-автономного-режима-в-облегчённый}

-   Подключиться к точке доступа по консольному кабелю.
-   Войдите в режим конфигурации:
    ```shell
    configure terminal
    ```
-   Обновим прошивку:
    ```shell
    archive tar /xtract tftp://10.10.1.4/ap3g2-rcvk9w8-tar.153-3.JF11.tar flash:
    ```
-   Удалим старую прошивку:
    ```shell
    del /force /recursive flash:/ap3g2-rcvk9w7-tar.153-3.JF11.tar
    ```
-   Перезагружаем точку доступа:
    ```shell
    reload
    ```
