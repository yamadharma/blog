---
title: "Настройка редактора vim"
author: ["Dmitry S. Kulyabov"]
date: 2023-07-04T20:17:00+03:00
lastmod: 2024-01-03T19:24:00+03:00
tags: ["vim"]
categories: ["computer-science"]
draft: false
slug: "vim-editor-configuration"
---

Настройка редактора vim.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Файлы конфигурации {#файлы-конфигурации}

-   Глобальная конфигурация: `/etc/vim/vimrc`
-   Пользовательская конфигурация: `~/.vimrc`


## <span class="section-num">2</span> Синтаксис {#синтаксис}

-   Комментарий начинается со знака кавычки: `"`.


## <span class="section-num">3</span> Поддержка русского языка {#поддержка-русского-языка}

-   Поскольку vim работает в консоли, можно использовать системное переключение языка.
-   Однако при этом не возможно использовать клавишные комбинации.


### <span class="section-num">3.1</span> Модуль keymap {#модуль-keymap}

-   Предлагается использовать внутренний переключатель раскладок vim, реализуемый модулем `keymap`.
-   С помощью `keymap` vim переводит символы, введённые в обычной раскладке клавиатуры, в определённые символы в режиме вставки (согласно некоторой предоставленной таблице).
-   Проверьте, что модуль `keymap` установлен:
    -   в окне `vim` введите в командном буфере `:version`;
    -   в списке модулей должен присутствовать элемент  `+keymap`.
-   Модули устанавливаются на этапе компиляции vim.
-   Переключение между кириллицей и латиницей комбинацией `Ctrl+^` в режиме INSERT.
-   При этом, сохраняются все английские настройки для других режимов, как будто используем английскую раскладку, хотя в режиме INSERT набираем текст по-русски.
-   Все доступные раскладки в каталоге `/usr/share/vim/vim<версия>/keymap`.
-   Возможные варианты (`russian-<вариант>`):
    -   `jcuken`, `jcukenwin`, `jcukenwintype`, `jcukenmac`, `typograph`, `yawerty`, `dvorak`

<!--listend-->

```conf-unix
set keymap=russian-jcuken
```

-   Чтобы вставка и поиск работали на английском:
    ```conf-unix
    set iminsert=0 " Чтобы при старте ввод был на английском, а не русском
    set imsearch=0 " Чтобы при старте поиск был на английском, а не русском
    ```

    -   Сброс `iminsert` и `imsearch` необходим, чтобы в самый первый раз вставка и ввод паттерна поиска начались с латиницы. Фактически, `Ctrl+^` переключает эти значения между 0 и 1.
-   Чтобы можно было так же нажимать `Ctrl-\` для переключения, помимо `Ctrl+^` (для совместимости с Emacs):
    ```conf-unix
    inoremap <C-\> <C-^>
    ```
-   Дополнительная подсветка для курсора, чтобы различать режимы:
    ```conf-unix
    highlight lCursor guifg=NONE guibg=Cyan
    ```


### <span class="section-num">3.2</span> Модуль langmap {#модуль-langmap}

-   Проверьте, что модуль `langmap` установлен:
    -   в окне `vim` введите в командном буфере `:version`;
    -   в списке модулей должен присутствовать элемент  `+langmap`.
-   Модули устанавливаются на этапе компиляции vim.
-   С помощью `langmap` vim переводит символы, введённые в неправильной раскладке, в обычные команды нормального режима (согласно некоторой предоставленной таблице).
-   Установите в конфигурационном файле:
    ```conf-unix
    set langmap=йЙцЦуУкКеЕнНгГшШщЩзЗхХъЪфФыЫвВаАпПрРоОлЛдДжЖэЭяЯчЧсСмМиИтТьЬбБюЮ.\\,;qQwWeErRtTyYuUiIoOpP[{]}aAsSdDfFgGhHjJkKlL;:'\"zZxXcCvVbBnNmM\\,<.>/?
    ```
