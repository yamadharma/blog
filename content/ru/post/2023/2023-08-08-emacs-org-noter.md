---
title: "Emacs. Org-noter"
author: ["Dmitry S. Kulyabov"]
date: 2023-08-08T20:31:00+03:00
lastmod: 2024-08-10T17:49:00+03:00
tags: ["emacs"]
categories: ["computer-science"]
draft: false
slug: "emacs-org-noter"
---

Emacs. Пакет org-noter.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Общая информация {#общая-информация}

-   Репозиторий: <https://github.com/org-noter/org-noter>
-   Предыдущие варианты:
    -   <https://github.com/weirdNox/org-noter>
-   Позволяет создавать заметки, которые синхронизируются при прокрутке документа, но являются внешними по отношению к нему.
-   Заметки сохраняются в файле org-mode.
-   Совместим с DocView , PDF Tools , Nov.el и DJVU-image-mode.
-   Позволяет комментировать файлы в форматах PDF, EPUB , Microsoft Office , DVI, PS, OpenDocument, DJVU.


## <span class="section-num">2</span> Навигация по документу и примечаниям {#навигация-по-документу-и-примечаниям}

<div class="table-caption">
  <span class="table-number">&#1058;&#1072;&#1073;&#1083;&#1080;&#1094;&#1072; 1:</span>
  Сочетания клавиш для org-noter
</div>

| Сочетание клавиш | Описание                                       | Область действия           |
|------------------|------------------------------------------------|----------------------------|
| `i`              | Вставить примечание                            | Буфер документов           |
| `C-i`, `TAB`     | Вставить примечание, переключить без вопросов  | Буфер документов           |
| `M-i`            | Вставьте точное примечание                     | Буфер документов           |
| `C-M-i`          | Вставьте точную заметку, включите без вопросов | Буфер документов           |
| `q`              | Убить сеанс                                    | Буфер документов           |
| `M-p`            | Синхронизировать предыдущую страницу/главу     | Буфер документов и заметок |
| `M-.`            | Синхронизировать текущую страницу/главу        | Буфер документов и заметок |
| `M-n`            | Синхронизировать следующую страницу/главу      | Буфер документов и заметок |
| `C-M-p`          | Синхронизировать предыдущие заметки            | Буфер документов и заметок |
| `C-M-.`          | Синхронизировать документ с заметками          | Буфер документов и заметок |
| `C-M-n`          | Синхронизировать следующие заметки             | Буфер документов и заметок |

-   Для навигации по документу можно использовать обычные сочетания клавиш:
    -   `SPC`, `n`, `Page-down`, `down`: двигаться вперед в документе.
    -   `BACKSPACE`, `p`, `Page-up`, `up`: вернуться назад в документе.


## <span class="section-num">3</span> Настройка {#настройка}

-   Вы можете установить начальное местоположение для документа, используя `org-noter-set-start-location`.
-   Чтобы автоматически возобновить работу с того места, где вы остановились, используйте `org-noter-set-auto-save-last-location`.
-   С помощью `org-noter-set-notes-window-behavior` вы можете изменить всплывающее окно заметок.
-   С помощью `org-noter-set-notes-window-location` вы можете изменить позицию, где всплывает окно заметок.
-   `org-noter-set-doc-split-fraction` запросит у вас долю кадра, которую занимает окно документа при разделении.
-   `org-noter-set-hide-other` будет переключать, следует ли скрывать заголовки, не связанные с выполняемым действием.
-   `org-noter-set-closest-tipping-point` установит ближайшую точку записи.


### <span class="section-num">3.1</span> Вставка примечания без подтверждения {#вставка-примечания-без-подтверждения}

-   `org-noter-insert-note-no-questions` по умолчанию `nil`.
-   Если установлено значение `t`, приглашение минибуфера заголовка заметки пропускается, и заметка всегда создается с заголовком по умолчанию.
-   Активируйте этот параметр, если вы редко или никогда не печатаете собственные заголовки.
-   Оба стиля вставки примечаний имеют вариант `toggle-no-questions`, позволяющий получить поведение не по умолчанию.
-   Привязка клавиш по умолчанию для варианта `toggle-no-questions` добавляет клавишу Control (`C-i` и `C-M-i`, соответственно).


### <span class="section-num">3.2</span> Выделение цветом {#выделение-цветом}

-   `org-noter-highlight-selected-text` управляет поведением выделения выделенного текста по умолчанию.
-   `C-u` префикс к любой команде вставки заметки переключает это поведение.


## <span class="section-num">4</span> Порядок работы {#порядок-работы}


### <span class="section-num">4.1</span> Открытие сеанса заметок {#открытие-сеанса-заметок}

-   Подготовить файл:
    -   открыть файл (pdf, djvu, epub);
    -   открыть заметку org-roam с ссылкой на рецензируемый файл.
-   `M-x org-noter`


### <span class="section-num">4.2</span> Настройка расположения окон {#настройка-расположения-окон}

-   Можно удовольствоваться расположением окон по умолчанию.
-   Можно задать своё расположение.
-   `M-x org-noter-set-doc-split-fraction`
-   `M-x org-noter-set-notes-window-location`


### <span class="section-num">4.3</span> Настройка нескольких столбцов {#настройка-нескольких-столбцов}

-   Порядок заметок в нескольких столбцах можно настроить на уровне документа или заголовка.
-   `org-noter-pdf-set-columns` вставляет параметр `COLUMN_EDGES` в свойства текущего заголовка.
-   Команда запрашивает количество столбцов, а затем просит вас щёлкнуть по правому краю всех столбцов, кроме последнего.
-   Свойство наследуется всеми подзаголовками.


### <span class="section-num">4.4</span> Скопировать структуру документа в заметку {#скопировать-структуру-документа-в-заметку}

-   `M-x org-noter-create-skeleton`


### <span class="section-num">4.5</span> Вставка примечания {#вставка-примечания}


#### <span class="section-num">4.5.1</span> `insert-note` (`i`) {#insert-note--i}

-   Вставляет заметку, связанную с текущей страницей.
-   Если заголовок не указан, то используется заголовок по умолчанию «Примечания для страницы &lt;P&gt;», где &lt;P&gt; --- метка страницы, если она существует, или номер страницы.
-   Если текст выделен и он короткий (`org-noter-max-short-selected-text-length`), выделенный текст становится заголовком по умолчанию.
-   Если вы вводите заголовок, выделенный текст помещается в кавычки в основной части заметки.
-   Короткий выделенный текст будет заключён в «кавычки в стиле LaTeX».
-   Длинный выделенный текст устанавливается внутри разделителей блока `QUOTE`.
-   В подсказке заголовка `Note:` вы можете использовать `M-p` для выбора из заголовков предыдущих заметок или `M-n` для выбора из значений по умолчанию.
-   Если вы выберете заголовок предыдущей заметки, то выделенный текст будет цитироваться в этом заголовке.


#### <span class="section-num">4.5.2</span> `insert-precise-note` (`M-i`) {#insert-precise-note--m-i}

-   Точные заметки всегда создают новую заметку, даже если вы выбираете существующий предыдущий заголовок.
-   Точные заметки связаны с определенной точкой на странице, заданной вертикальными и горизонтальными координатами.
-   Свойство `COLUMN_EDGES`, задаваемое параметром `org-noter-pdf-set-columns`, управляет порядком точных заметок на странице.
-   Если заголовок не указан, то используется заголовок по умолчанию `Notes for page <P> V: <v>% H: <h>%`, где
    -   `<P>` --- метка страницы, если она существует, или номер страницы,
    -   `<v>` --- вертикальное расстояние от вершины,
    -   `<h>` --- горизонтальное положение слева.
-   Поведение с выделенным текстом (заголовок по умолчанию, цитирование в теле) такое же, как и для `insert-note`.
