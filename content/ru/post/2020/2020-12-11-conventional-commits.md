---
title: "Общепринятые коммиты"
date: 2020-12-11T19:39:00+03:00
lastmod: 2021-01-15T17:46:00+03:00
tags: ["programming"]
categories: ["sysadmin"]
draft: false
slug: "conventional-commits"
---

Использование спецификации _Conventional Commits_.

<!--more-->

{{< toc >}}


## Описание {#описание}

Спецификация [Conventional Commits](https://www.conventionalcommits.org/ru/):

-   Соглашение о том, как нужно писать сообщения commit'ов.
-   Совместимо с [SemVer](http://semver.org/) (см. [Семантическое версионирование]({{< relref "2020-12-11-semantic-versioning" >}})). Даже вернее сказать, сильно связано с семантическим версионированием.
-   Регламентирует структуру и основные типы коммитов.


### Структура коммита {#структура-коммита}

```text
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

-   Заголовок является обязательным.
-   Любая строка сообщения о фиксации не может быть длиннее 100 символов.
-   Тема (subject) содержит краткое описание изменения.
    -   Используйте повелительное наклонение в настоящем времени: «изменить» ("change" not "changed" nor "changes").
    -   Не используйте заглавную первую букву.
    -   Не ставьте точку в конце.
-   Тело (body) должно включать мотивацию к изменению и противопоставлять это предыдущему поведению.
    -   Как и в теме, используйте повелительное наклонение в настоящем времени.
-   Нижний колонтитул (footer) должен содержать любую информацию о критических изменениях.
    -   Также содержит ссылку на issue (например, на github), который закрывает эта фиксация.
    -   Критические изменения должны начинаться со слова `BREAKING CHANGE:` с пробела или двух символов новой строки. Затем для этого используется остальная часть сообщения фиксации.


#### Базовые типы коммитов {#базовые-типы-коммитов}

-   `fix:` --- коммит типа fix исправляет ошибку (bug) в вашем коде (он соответствует PATCH в SemVer).
-   `feat:` --- коммит типа feat добавляет новую функцию (feature) в ваш код (он соответствует MINOR в SemVer).
-   `BREAKING CHANGE:` --- коммит, который содержит текст `BREAKING CHANGE:` в начале своего не обязательного тела сообщения (body) или в
    подвале (footer), добавляет изменения, нарушающие обратную
    совместимость вашего API (он соответствует MAJOR в SemVer). BREAKING CHANGE может быть частью коммита любого типа.
-   `revert:` --- если фиксация отменяет предыдущую фиксацию. Начинается с `revert:`, за которым следует заголовок отменённой фиксации. В теле должно быть написано: Это отменяет фиксацию `<hash>` (это SHA-хэш отменяемой фиксации).
-   Другое: коммиты с типами, которые отличаются от `fix:` и `feat:`,
    также разрешены. Например, @commitlint/config-conventional
    (основанный на The Angular convention) рекомендует: chore:, docs:,
    style:, refactor:, perf:, test:, и другие.


#### Соглашения The Angular convention {#соглашения-the-angular-convention}

Одно из популярных соглашений о поддержке исходных кодов --- конвенция Angular ([The Angular convention](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines)).

<!--list-separator-->

-  Типы коммитов The Angular convention

    Конвенция Angular ([The Angular convention](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines)) требует следующие типы коммитов:

    -   `build:` --- изменения, влияющие на систему сборки или внешние зависимости (примеры областей (scope): gulp, broccoli, npm).
    -   `ci:` --- изменения в файлах конфигурации и скриптах CI (примеры областей: Travis, Circle, BrowserStack, SauceLabs).
    -   `docs:` --- изменения только в документации.
    -   `feat:` --- новая функция.
    -   `fix:` --- исправление ошибок.
    -   `perf:` --- изменение кода, улучшающее производительность.
    -   `refactor:` --- Изменение кода, которое не исправляет ошибку и не добавляет функции (рефакторинг кода).
    -   `style:` --- изменения, не влияющие на смысл кода (пробелы, форматирование, отсутствие точек с запятой и т. д.).
    -   `test:` --- добавление недостающих тестов или исправление существующих тестов.

<!--list-separator-->

-  Области действия (scope)

    Областью действия должно быть имя затронутого пакета npm (как его воспринимает человек, читающий журнал изменений, созданный из сообщений фиксации).

    Есть несколько исключений из правила «использовать имя пакета»:

    -   `packaging` --- используется для изменений, которые изменяют структуру пакета, например, изменения общедоступного пути.
    -   `changelog` --- используется для обновления примечаний к выпуску в CHANGELOG.md.
    -   отсутствует область действия --- полезно для изменений стиля, тестирования и рефакторинга, которые выполняются во всех пакетах (например, style: добавить отсутствующие точки с запятой).


#### Соглашения @commitlint/config-conventional {#соглашения-commitlint-config-conventional}

Соглашение [@commitlint/config-conventional](https://github.com/conventional-changelog/commitlint/tree/master/%40commitlint/config-conventional) входит в пакет [Conventional Changelog](https://github.com/conventional-changelog/conventional-changelog). В целом в этом соглашении придерживаются соглашения Angular.


## Программное обеспечение {#программное-обеспечение}


## Backlinks {#backlinks}


### [Система контроля версий git]({{< relref "2020-12-07-git-cvs" >}}) {#система-контроля-версий-git}

[Общепринятые коммиты]({{< relref "2020-12-11-conventional-commits" >}})


### [Семантическое версионирование]({{< relref "2020-12-11-semantic-versioning" >}}) {#семантическое-версионирование}

Для реализации семантического версионирования создано несколько программных продуктов. При этом лучше всего использовать комплексные продукты, которые используют информацию из коммитов системы версионирования. Естественно, коммиты должны иметь стандартизованный вид. Поэтому в семантическое версионирование применяется вместе с [Общепринятыми коммитами]({{< relref "2020-12-11-conventional-commits" >}}).
