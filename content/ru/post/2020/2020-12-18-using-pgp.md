---
title: "Работа с PGP"
date: 2020-12-18T12:39:00+03:00
lastmod: 2021-01-10T19:45:00+03:00
tags: ["programming"]
categories: ["sysadmin"]
draft: false
slug: "using-pgp"
---

Использование набора программ PGP.

<!--more-->

{{< toc >}}


## Экспорт ключей PGP {#экспорт-ключей-pgp}

-   Экспорт ключей
    -   Экспорт всех открытых ключей в текстовый файл в кодировке base64:

        ```shell
        gpg -a --export > mypubkeys.asc
        ```
    -   Экспорт всех зашифрованных закрытых ключей (которые также будут включать соответствующие открытые ключи) в текстовый файл:

        ```shell
        gpg -a --export-secret-keys > myprivatekeys.asc
        ```
    -   Опционально экспортируется `trustdb` gpg в текстовый файл:

        ```shell
        gpg --export-ownertrust > otrust.txt
        ```
-   Импорт ключей
    -   Выполните команды `gpg --import` для двух файлов `asc`, а затем проверьте наличие новых ключей с помощью `gpg -k` и `gpg -K`:

        ```shell
        gpg --import myprivatekeys.asc
        gpg --import mypubkeys.asc
        gpg -K
        gpg -k
        ```
    -   При желании также импортируйте файл `trustdb`:

        ```shell
        gpg --import-ownertrust otrust.txt
        ```
    -   Проверьте шифрование и дешифрование с помощью команд `gpg -er USERID` и `gpg -d`.


## Шифрование {#шифрование}

Шифрование может быть симметричным и ассиметричным.

-   Симметричное шифрование шифруется и расшифровывается приватным ключом или одной и той же парольной фразой.
-   Ассиметричное шифрование шифруется публичным ключом, расшифровывается приватным.


### Симметричное шифрование {#симметричное-шифрование}

-   Зашифровать файл:

<!--listend-->

```shell
gpg -c filename
```

или

```shell
gpg --symmetric filename
```

-   Расшифровать файл:

    ```shell
    gpg --decrypt-files filename.gpg
    ```
-   Расшифровать файл с выводом на терминал:

    ```shell
    gpg --decrypt filename.gpg
    ```


## Backlinks {#backlinks}


### [Система контроля версий git]({{< relref "2020-12-07-git-cvs" >}}) {#система-контроля-версий-git}

Для подписывания коммитов используется технология PGP (см. [Работа с PGP]({{< relref "2020-12-18-using-pgp" >}})).


### [Emacs. Почта. GNUS]({{< relref "2020-12-21-emacs-mail-gnus" >}}) {#emacs-dot-почта-dot-gnus}

Для безопасности следует зашифровать файл паролей (см. [Работа с PGP]({{< relref "2020-12-18-using-pgp" >}})).
