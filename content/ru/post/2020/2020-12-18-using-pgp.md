---
title: "Работа с PGP"
author: ["Dmitry S. Kulyabov"]
date: 2020-12-18T12:39:00+03:00
lastmod: 2022-03-03T15:35:00+03:00
tags: ["programming", "sysadmin", "education"]
categories: ["computer-science"]
draft: false
slug: "using-pgp"
---

Использование набора программ PGP.

<!--more-->

{{< toc >}}


## <span class="section-num">1</span> Экспорт ключей PGP {#экспорт-ключей-pgp}

-   Экспорт ключей
    -   Экспорт всех открытых ключей в текстовый файл в кодировке base64:

        ```shell
        gpg -a --export > mypubkeys.asc
        ```
    -   Экспорт всех зашифрованных закрытых ключей (которые также будут включать соответствующие открытые ключи) в текстовый файл:

        ```shell
        gpg -a --export-secret-keys > myprivatekeys.asc
        ```
    -   Опционально экспортируется `trustdb` gpg в текстовый файл:

        ```shell
        gpg --export-ownertrust > otrust.txt
        ```
-   Импорт ключей
    -   Выполните команды `gpg --import` для двух файлов `asc`, а затем проверьте наличие новых ключей с помощью `gpg -k` и `gpg -K`:

        ```shell
        gpg --import myprivatekeys.asc
        gpg --import mypubkeys.asc
        gpg -K
        gpg -k
        ```
    -   При желании также импортируйте файл `trustdb`:

        ```shell
        gpg --import-ownertrust otrust.txt
        ```
    -   Проверьте шифрование и дешифрование с помощью команд `gpg -er USERID` и `gpg -d`.


## <span class="section-num">2</span> Шифрование {#шифрование}

-   Шифрование может быть симметричным и ассиметричным.
-   Симметричное шифрование шифруется и расшифровывается приватным ключом или одной и той же парольной фразой.
-   Ассиметричное шифрование шифруется публичным ключом, расшифровывается приватным.


### <span class="section-num">2.1</span> Симметричное шифрование {#симметричное-шифрование}

-   Зашифровать файл:

<!--listend-->

```shell
gpg -c filename
```

или

```shell
gpg --symmetric filename
```

-   Расшифровать файл:

    ```shell
    gpg --decrypt-files filename.gpg
    ```
-   Расшифровать файл с выводом на терминал:

    ```shell
    gpg --decrypt filename.gpg
    ```
