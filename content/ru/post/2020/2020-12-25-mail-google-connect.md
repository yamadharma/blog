---
title: "Почта. Подключение к Google"
date: 2020-12-25T16:55:00+03:00
lastmod: 2024-05-15T20:53:00+03:00
tags: ["sysadmin"]
categories: ["computer-science"]
draft: false
slug: "mail-google-connect"
---

Google по умолчанию блокирует подключение сторонних клиентов.

<!--more-->

@@hugo{{&lt; toc &gt;}}@@


## <span class="section-num">1</span> ~~Явное разрешение подключения~~ {#8b89f0}

-   Начиная с 30 мая 2022 года Google больше не поддерживает сторонние приложения и устройства, которые предлагают войти в аккаунт Google только с помощью имени пользователя и пароля.
-   Следующие рекомендации больше **не работают**.
    -   Перейти на страницу безопасности Google <https://myaccount.google.com/security>.
    -   Переключить «Небезопасные приложения заблокированы» на «Небезопасные приложения разрешены».


## <span class="section-num">2</span> Двухэтапная аутентификация {#двухэтапная-аутентификация}

-   В Google Mail используется проприетарное расширение SASL XOAUTH2 для поддержки токенов OAuth 2.0 для аутентификации SMTP/IMAP.
-   Подключите на учётной записи двухэтапную аутентификацию: <https://myaccount.google.com/signinoptions/two-step-verification/enroll-welcome>.


## <span class="section-num">3</span> Пароли приложений {#пароли-приложений}

-   Необходимо включить двухэтапную аутентификацию для устройств, не поддерживающих двухэтапную аутентификацию. Для этого необходимо:
    -   Перейти по адресу <https://myaccount.google.com/apppasswords>.
    -   Подключиться к необходимой учётной записи.
    -   Сгенерить пароль приложения.
    -   Поместите полученный пароль в файл аутентификации (например, `~/.authinfo`) вместо Вашего пароля.


## <span class="section-num">4</span> Имена файлов паролей паролей для pass {#имена-файлов-паролей-паролей-для-pass}

-   Пароли храню в хранилище _pass_ (см. [Менеджер паролей pass]({{< relref "2021-04-28-password-manager-pass" >}})).
-   Шаблон имени файла пароля:
    ```shell
    account@google.com@server
    ```
-   Список серверов
    -   IMAP: `imap.google.com`;
    -   POP3: `pop.google.com`;
    -   SMTP: `smtp.google.com`.
